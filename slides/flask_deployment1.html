<h2>Flask Deployment</h2>

<div class="fragment">
<p></br>k8s/devopstree-deployment-flask.yml:</p>
<pre><code data-trim data-noescape>
apiVersion: apps/v1
kind: Deployment
metadata:
  creationTimestamp: null
  labels:
    name: devopstree-flask
  name: devopstree-flask
spec:
  progressDeadlineSeconds: 2147483647
  replicas: 1
  selector:
    matchLabels:
      app: devopstree-flask
  template:
    metadata:
      creationTimestamp: null
      labels:
        app: devopstree-flask
    spec:
      containers:
      - env:
        - name: FLASK_ENV
          value: development
        - name: APP_SETTINGS
          value: project.config.DevelopmentConfig
        - name: POSTGRES_USER
          valueFrom:
            secretKeyRef:
              key: user
              name: postgres-credentials
        - name: POSTGRES_PASSWORD
          valueFrom:
            secretKeyRef:
              key: password
              name: postgres-credentials
        image: vinaydhegde/devopstree-flask:latest
        imagePullPolicy: Always
        name: flask
        resources: {}
        terminationMessagePath: /dev/termination-log
        terminationMessagePolicy: File
      dnsPolicy: ClusterFirst
      restartPolicy: Always
      schedulerName: default-scheduler
      securityContext: {}
      terminationGracePeriodSeconds: 30
</code></pre>    
</div>

<div class="fragment">
<p>Build and Push the image to DockerHUb</p>
<pre><code data-trim data-noescape>
$ docker build -t <YOUR_DOCKER_HUB_NAME>/devopstree-flask ./services/server
$ docker push <YOUR_DOCKER_HUB_NAME>/devopstree-flask
</code></pre>
</div>  

<div class="fragment">
<p>Create the deployment</p>
<pre><code data-trim data-noescape>
kubectl create -f ./k8s/devopstree-deployment-flask.yml
</code></pre>
</div>  
